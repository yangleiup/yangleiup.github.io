<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>redux与mobx区别 | 地狱猫</title>
    <meta name="description" content="向前一小步文明一大步">
    
    
    <link rel="preload" href="/assets/css/0.styles.5b15de55.css" as="style"><link rel="preload" href="/assets/js/app.51a29151.js" as="script"><link rel="preload" href="/assets/js/2.c2339c3e.js" as="script"><link rel="preload" href="/assets/js/37.d73fc92f.js" as="script"><link rel="prefetch" href="/assets/js/10.8575bac9.js"><link rel="prefetch" href="/assets/js/100.f97109d5.js"><link rel="prefetch" href="/assets/js/101.f3c4a370.js"><link rel="prefetch" href="/assets/js/102.59e667d9.js"><link rel="prefetch" href="/assets/js/103.1e129d72.js"><link rel="prefetch" href="/assets/js/104.7a13e78e.js"><link rel="prefetch" href="/assets/js/105.4a071eba.js"><link rel="prefetch" href="/assets/js/106.22ec4c6f.js"><link rel="prefetch" href="/assets/js/107.afe7c943.js"><link rel="prefetch" href="/assets/js/108.8e93cbe3.js"><link rel="prefetch" href="/assets/js/109.d212e52b.js"><link rel="prefetch" href="/assets/js/11.ed035e9e.js"><link rel="prefetch" href="/assets/js/110.936e9647.js"><link rel="prefetch" href="/assets/js/111.6c3a08fe.js"><link rel="prefetch" href="/assets/js/112.c9be2fd8.js"><link rel="prefetch" href="/assets/js/113.42ac0741.js"><link rel="prefetch" href="/assets/js/114.8dfce964.js"><link rel="prefetch" href="/assets/js/115.f85e9b76.js"><link rel="prefetch" href="/assets/js/116.613366bc.js"><link rel="prefetch" href="/assets/js/117.a6b9c9a1.js"><link rel="prefetch" href="/assets/js/118.d097d988.js"><link rel="prefetch" href="/assets/js/119.3893c2f3.js"><link rel="prefetch" href="/assets/js/12.ee2aef2f.js"><link rel="prefetch" href="/assets/js/120.9a30e5ad.js"><link rel="prefetch" href="/assets/js/121.8785d250.js"><link rel="prefetch" href="/assets/js/122.44a0cfb2.js"><link rel="prefetch" href="/assets/js/123.6acf6307.js"><link rel="prefetch" href="/assets/js/124.41801d93.js"><link rel="prefetch" href="/assets/js/125.937d1678.js"><link rel="prefetch" href="/assets/js/126.24fbb893.js"><link rel="prefetch" href="/assets/js/127.d851a6bf.js"><link rel="prefetch" href="/assets/js/128.859d4f38.js"><link rel="prefetch" href="/assets/js/129.f0e28855.js"><link rel="prefetch" href="/assets/js/13.4ff37fc0.js"><link rel="prefetch" href="/assets/js/130.a2809baf.js"><link rel="prefetch" href="/assets/js/14.57242872.js"><link rel="prefetch" href="/assets/js/15.9053ef96.js"><link rel="prefetch" href="/assets/js/16.1792f1a1.js"><link rel="prefetch" href="/assets/js/17.3e595d76.js"><link rel="prefetch" href="/assets/js/18.923046c6.js"><link rel="prefetch" href="/assets/js/19.21ffaac4.js"><link rel="prefetch" href="/assets/js/20.4f94606e.js"><link rel="prefetch" href="/assets/js/21.93358a15.js"><link rel="prefetch" href="/assets/js/22.48ccb63a.js"><link rel="prefetch" href="/assets/js/23.ea603604.js"><link rel="prefetch" href="/assets/js/24.446ad270.js"><link rel="prefetch" href="/assets/js/25.158f8f55.js"><link rel="prefetch" href="/assets/js/26.ea60e4b8.js"><link rel="prefetch" href="/assets/js/27.9d9c2368.js"><link rel="prefetch" href="/assets/js/28.3bec7377.js"><link rel="prefetch" href="/assets/js/29.87787fc0.js"><link rel="prefetch" href="/assets/js/3.55fc7466.js"><link rel="prefetch" href="/assets/js/30.35bddbb7.js"><link rel="prefetch" href="/assets/js/31.800c5ac8.js"><link rel="prefetch" href="/assets/js/32.0876c249.js"><link rel="prefetch" href="/assets/js/33.b816934c.js"><link rel="prefetch" href="/assets/js/34.68ce23d3.js"><link rel="prefetch" href="/assets/js/35.210d78be.js"><link rel="prefetch" href="/assets/js/36.3da9b8e0.js"><link rel="prefetch" href="/assets/js/38.df50b170.js"><link rel="prefetch" href="/assets/js/39.64f9f1aa.js"><link rel="prefetch" href="/assets/js/4.a18312b1.js"><link rel="prefetch" href="/assets/js/40.c27ae153.js"><link rel="prefetch" href="/assets/js/41.084f6a54.js"><link rel="prefetch" href="/assets/js/42.06e6f543.js"><link rel="prefetch" href="/assets/js/43.403e4ac9.js"><link rel="prefetch" href="/assets/js/44.42c83af8.js"><link rel="prefetch" href="/assets/js/45.5259bdd8.js"><link rel="prefetch" href="/assets/js/46.8fedff09.js"><link rel="prefetch" href="/assets/js/47.09f1794a.js"><link rel="prefetch" href="/assets/js/48.23aabf46.js"><link rel="prefetch" href="/assets/js/49.bed289be.js"><link rel="prefetch" href="/assets/js/5.98f0c28f.js"><link rel="prefetch" href="/assets/js/50.c7724540.js"><link rel="prefetch" href="/assets/js/51.a79522a9.js"><link rel="prefetch" href="/assets/js/52.d60f76c3.js"><link rel="prefetch" href="/assets/js/53.332e4449.js"><link rel="prefetch" href="/assets/js/54.3f61949e.js"><link rel="prefetch" href="/assets/js/55.f66cb7d3.js"><link rel="prefetch" href="/assets/js/56.b9b06039.js"><link rel="prefetch" href="/assets/js/57.b114c28e.js"><link rel="prefetch" href="/assets/js/58.32a118ba.js"><link rel="prefetch" href="/assets/js/59.561a29d1.js"><link rel="prefetch" href="/assets/js/6.2c421036.js"><link rel="prefetch" href="/assets/js/60.001726ac.js"><link rel="prefetch" href="/assets/js/61.35ad4d28.js"><link rel="prefetch" href="/assets/js/62.76799042.js"><link rel="prefetch" href="/assets/js/63.56762851.js"><link rel="prefetch" href="/assets/js/64.c4630a5c.js"><link rel="prefetch" href="/assets/js/65.ffe81bab.js"><link rel="prefetch" href="/assets/js/66.ca97f871.js"><link rel="prefetch" href="/assets/js/67.bd8a46f2.js"><link rel="prefetch" href="/assets/js/68.fd44172f.js"><link rel="prefetch" href="/assets/js/69.6099b948.js"><link rel="prefetch" href="/assets/js/7.c1707ee3.js"><link rel="prefetch" href="/assets/js/70.8d69666c.js"><link rel="prefetch" href="/assets/js/71.4f5e4273.js"><link rel="prefetch" href="/assets/js/72.628817fa.js"><link rel="prefetch" href="/assets/js/73.948a8173.js"><link rel="prefetch" href="/assets/js/74.4f9ca992.js"><link rel="prefetch" href="/assets/js/75.eb978e98.js"><link rel="prefetch" href="/assets/js/76.2e8e38e4.js"><link rel="prefetch" href="/assets/js/77.a5b9c9e0.js"><link rel="prefetch" href="/assets/js/78.caff3dc7.js"><link rel="prefetch" href="/assets/js/79.4eed3c6b.js"><link rel="prefetch" href="/assets/js/8.10903250.js"><link rel="prefetch" href="/assets/js/80.7610b2f7.js"><link rel="prefetch" href="/assets/js/81.28f6c83d.js"><link rel="prefetch" href="/assets/js/82.9f550de8.js"><link rel="prefetch" href="/assets/js/83.f80aa6a9.js"><link rel="prefetch" href="/assets/js/84.e67d1a75.js"><link rel="prefetch" href="/assets/js/85.8d48bf5c.js"><link rel="prefetch" href="/assets/js/86.fd4cf111.js"><link rel="prefetch" href="/assets/js/87.09bfaf4d.js"><link rel="prefetch" href="/assets/js/88.ce0a5715.js"><link rel="prefetch" href="/assets/js/89.0ae25153.js"><link rel="prefetch" href="/assets/js/9.78eb1038.js"><link rel="prefetch" href="/assets/js/90.7da397a9.js"><link rel="prefetch" href="/assets/js/91.501df963.js"><link rel="prefetch" href="/assets/js/92.9a1dbce7.js"><link rel="prefetch" href="/assets/js/93.b5a54ab6.js"><link rel="prefetch" href="/assets/js/94.826ace7f.js"><link rel="prefetch" href="/assets/js/95.e44fd8fd.js"><link rel="prefetch" href="/assets/js/96.53cd41fc.js"><link rel="prefetch" href="/assets/js/97.aa4f5ef1.js"><link rel="prefetch" href="/assets/js/98.50d1a130.js"><link rel="prefetch" href="/assets/js/99.f2671763.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5b15de55.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">地狱猫</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/webpack/基础篇.html" class="nav-link">webpack</a></div><div class="nav-item"><a href="/react/" class="nav-link">react</a></div><div class="nav-item"><a href="/css/规范.html" class="nav-link">css</a></div><div class="nav-item"><a href="/day/a标签href不能下载图片.html" class="nav-link">日常</a></div><div class="nav-item"><a href="/tool/emoij美化你的commitlog.html" class="nav-link">工具</a></div><div class="nav-item"><a href="/accumulate/jserror.html" class="nav-link">积累</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">算法</a></div><div class="nav-item"><a href="/datastruct/" class="nav-link">数据结构</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/webpack/基础篇.html" class="nav-link">webpack</a></div><div class="nav-item"><a href="/react/" class="nav-link">react</a></div><div class="nav-item"><a href="/css/规范.html" class="nav-link">css</a></div><div class="nav-item"><a href="/day/a标签href不能下载图片.html" class="nav-link">日常</a></div><div class="nav-item"><a href="/tool/emoij美化你的commitlog.html" class="nav-link">工具</a></div><div class="nav-item"><a href="/accumulate/jserror.html" class="nav-link">积累</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">算法</a></div><div class="nav-item"><a href="/datastruct/" class="nav-link">数据结构</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/accumulate/jserror.html" class="sidebar-link">js 常犯错误</a></li><li><a href="/accumulate/deepcopy.html" class="sidebar-link">什么是深浅拷贝</a></li><li><a href="/accumulate/closure.html" class="sidebar-link">闭包</a></li><li><a href="/accumulate/delegate.html" class="sidebar-link">事件委托（事件代理）</a></li><li><a href="/accumulate/horizontal-center.html" class="sidebar-link">水平居中</a></li><li><a href="/accumulate/vertical-center.html" class="sidebar-link">垂直居中</a></li><li><a href="/accumulate/text-show.html" class="sidebar-link">单行文本溢出省略展示</a></li><li><a href="/accumulate/context.html" class="sidebar-link">对JS上下文栈和作用域链的理解</a></li><li><a href="/accumulate/this.html" class="sidebar-link">this指向</a></li><li><a href="/accumulate/callapply.html" class="sidebar-link">call,apply</a></li><li><a href="/accumulate/bind.html" class="sidebar-link">bind实现</a></li><li><a href="/accumulate/new.html" class="sidebar-link">new实现</a></li><li><a href="/accumulate/prototype.html" class="sidebar-link">原型与继承</a></li><li><a href="/accumulate/datatype.html" class="sidebar-link">数据类型</a></li><li><a href="/accumulate/Promise.html" class="sidebar-link">Promise 及 async swait</a></li><li><a href="/accumulate/debounce.html" class="sidebar-link">防抖</a></li><li><a href="/accumulate/throttle.html" class="sidebar-link">节流</a></li><li><a href="/accumulate/repaintreflow.html" class="sidebar-link">重绘与回流（又叫重排）</a></li><li><a href="/accumulate/kuayu.html" class="sidebar-link">跨域</a></li><li><a href="/accumulate/jsonp.html" class="sidebar-link">jsonp的原理与实现</a></li><li><a href="/accumulate/cookie.html" class="sidebar-link">cookie、session、localstorage、sessionStorage</a></li><li><a href="/accumulate/inputUrlToRender.html" class="sidebar-link">输入url回车到页面呈现间发生了什么</a></li><li><a href="/accumulate/threeandfour.html" class="sidebar-link">TCP三次握手与四次挥手</a></li><li><a href="/accumulate/array.html" class="sidebar-link">数组</a></li><li><a href="/accumulate/es6.html" class="sidebar-link">es6</a></li><li><a href="/accumulate/cache.html" class="sidebar-link">浏览器缓存</a></li><li><a href="/accumulate/reactdomdiff.html" class="sidebar-link">react dom diff</a></li><li><a href="/accumulate/boxsizing.html" class="sidebar-link">css盒模型</a></li><li><a href="/accumulate/decorator.html" class="sidebar-link">装饰器</a></li><li><a href="/accumulate/imglazyload.html" class="sidebar-link">图片懒加载</a></li><li><a href="/accumulate/router.html" class="sidebar-link">前端路由 hash + history</a></li><li><a href="/accumulate/redux与mobx区别.html" class="active sidebar-link">redux与mobx区别</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/accumulate/redux与mobx区别.html#redux与mobx区别" class="sidebar-link">redux与mobx区别</a></li><li class="sidebar-sub-header"><a href="/accumulate/redux与mobx区别.html#区别" class="sidebar-link">区别</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/accumulate/redux与mobx区别.html#函数式和面向对象：" class="sidebar-link">函数式和面向对象：</a></li><li class="sidebar-sub-header"><a href="/accumulate/redux与mobx区别.html#单一store和多store" class="sidebar-link">单一store和多store</a></li><li class="sidebar-sub-header"><a href="/accumulate/redux与mobx区别.html#javascript对象和可观察对象" class="sidebar-link">JavaScript对象和可观察对象</a></li><li class="sidebar-sub-header"><a href="/accumulate/redux与mobx区别.html#不可变（immutable）和可变（mutable）" class="sidebar-link">不可变（Immutable）和可变（Mutable）</a></li><li class="sidebar-sub-header"><a href="/accumulate/redux与mobx区别.html#mobx-react和react-redux" class="sidebar-link">mobx-react和react-redux</a></li></ul></li><li class="sidebar-sub-header"><a href="/accumulate/redux与mobx区别.html#选择mobx的原因" class="sidebar-link">选择Mobx的原因</a></li><li class="sidebar-sub-header"><a href="/accumulate/redux与mobx区别.html#redux" class="sidebar-link">Redux</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/accumulate/redux与mobx区别.html#redux三大核心" class="sidebar-link">Redux三大核心</a></li><li class="sidebar-sub-header"><a href="/accumulate/redux与mobx区别.html#数据流" class="sidebar-link">数据流</a></li><li class="sidebar-sub-header"><a href="/accumulate/redux与mobx区别.html#异步流-后续重点学习下中间件" class="sidebar-link">`异步流`(后续重点学习下中间件)</a></li></ul></li><li class="sidebar-sub-header"><a href="/accumulate/redux与mobx区别.html#mobx" class="sidebar-link">Mobx</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/accumulate/redux与mobx区别.html#数据流-2" class="sidebar-link">数据流</a></li><li class="sidebar-sub-header"><a href="/accumulate/redux与mobx区别.html#observable-state（可被观察的状态）" class="sidebar-link">Observable state（可被观察的状态）</a></li><li class="sidebar-sub-header"><a href="/accumulate/redux与mobx区别.html#observer（观察者）" class="sidebar-link">Observer（观察者）</a></li><li class="sidebar-sub-header"><a href="/accumulate/redux与mobx区别.html#componentwillreact-生命周期钩子" class="sidebar-link">componentWillReact (生命周期钩子)</a></li><li class="sidebar-sub-header"><a href="/accumulate/redux与mobx区别.html#inject（注入）" class="sidebar-link">inject（注入）</a></li><li class="sidebar-sub-header"><a href="/accumulate/redux与mobx区别.html#computed-values-计算值" class="sidebar-link">Computed values(计算值)</a></li><li class="sidebar-sub-header"><a href="/accumulate/redux与mobx区别.html#action（动作）" class="sidebar-link">Action（动作）</a></li><li class="sidebar-sub-header"><a href="/accumulate/redux与mobx区别.html#异步-action" class="sidebar-link">异步 Action</a></li></ul></li></ul></li><li><a href="/accumulate/react.html" class="sidebar-link">react</a></li><li><a href="/accumulate/https.html" class="sidebar-link">https原理</a></li><li><a href="/accumulate/eventloop.html" class="sidebar-link">事件循环</a></li><li><a href="/accumulate/webpack.html" class="sidebar-link">webpack简介</a></li><li><a href="/accumulate/canvas+svg.html" class="sidebar-link">canvas svg</a></li><li><a href="/accumulate/js基础.html" class="sidebar-link">window document区别</a></li><li><a href="/accumulate/伪类与伪元素.html" class="sidebar-link">伪类与伪元素</a></li><li><a href="/accumulate/foreach遇上asyncawait.html" class="sidebar-link">当foreach遇上asyn cawait</a></li><li><a href="/accumulate/xss.html" class="sidebar-link">浅说 XSS 和 CSRF</a></li><li><a href="/accumulate/前端模块化.html" class="sidebar-link">CommonJS,AMD,CMD,ES6</a></li><li><a href="/accumulate/浏览器字体.html" class="sidebar-link">浏览器都支持哪些字体</a></li><li><a href="/accumulate/url编码与解码.html" class="sidebar-link">url编码与解码(为什么要对url进行编码与解码)</a></li><li><a href="/accumulate/动画绘制.html" class="sidebar-link">动画绘制实现</a></li><li><a href="/accumulate/获取元素宽高.html" class="sidebar-link">原生js获取元素宽高</a></li><li><a href="/accumulate/移动端相关问题.html" class="sidebar-link">移动端兼容性问题</a></li><li><a href="/accumulate/vue双向绑定实现原理.html" class="sidebar-link">vue双向绑定实现原理</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="redux与mobx区别"><a href="#redux与mobx区别" aria-hidden="true" class="header-anchor">#</a> redux与mobx区别</h2> <p>他们都是用来管理应用的state<br>
不使用状态管理在如下场景中比较麻烦：</p> <ul><li>某一个状态需要在多个组件间共享（访问，更新）；</li> <li>某组件内交互需要触发其他组件的状态更新；</li></ul> <h2 id="区别"><a href="#区别" aria-hidden="true" class="header-anchor">#</a> 区别</h2> <h3 id="函数式和面向对象："><a href="#函数式和面向对象：" aria-hidden="true" class="header-anchor">#</a> 函数式和面向对象：</h3> <p>Redux更多的是遵循函数式编程（Functional Programming, FP）思想，而Mobx则更多从面向对象角度考虑问题。</p> <p>Redux提倡编写函数式代码，如reducer就是一个纯函数（pure function），如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> state<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>复制代码纯函数，接受输入，然后输出结果，除此之外不会有任何影响，也包括不会影响接收的参数；对于相同的输入总是输出相同的结果。</p> <p>Mobx设计更多偏向于面向对象编程（OOP）和响应式编程（Reactive Programming），通常将状态包装成可观察对象，于是我们就可以使用可观察对象的所有能力，一旦状态对象变更，就能自动获得更新。</p> <h3 id="单一store和多store"><a href="#单一store和多store" aria-hidden="true" class="header-anchor">#</a> 单一store和多store</h3> <p>store是应用管理数据的地方，在Redux应用中，我们总是将所有共享的应用数据集中在一个大的store中，</p> <p>而Mobx则通常按模块将应用状态划分，在多个独立的store中管理。</p> <h3 id="javascript对象和可观察对象"><a href="#javascript对象和可观察对象" aria-hidden="true" class="header-anchor">#</a> JavaScript对象和可观察对象</h3> <p>Redux默认以JavaScript原生对象形式存储数据，而Mobx使用可观察对象：</p> <p>Redux需要手动追踪所有状态对象的变更；</p> <p>Mobx中可以监听可观察对象，当其变更时将自动触发监听；</p> <h3 id="不可变（immutable）和可变（mutable）"><a href="#不可变（immutable）和可变（mutable）" aria-hidden="true" class="header-anchor">#</a> 不可变（Immutable）和可变（Mutable）</h3> <p>Redux状态对象通常是不可变的（Immutable）：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">case</span> <span class="token constant">REQUEST_POST</span><span class="token punctuation">:</span>
  	<span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> state<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      post<span class="token punctuation">:</span> action<span class="token punctuation">.</span>payload<span class="token punctuation">.</span>post
  	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">default</span><span class="token punctuation">:</span>
    retur nstate<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>复制代码我们不能直接操作状态对象，而总是在原来状态对象基础上返回一个新的状态对象，这样就能很方便的返回应用上一状态；<br>
而Mobx中可以直接使用新值更新状态对象。</p> <h3 id="mobx-react和react-redux"><a href="#mobx-react和react-redux" aria-hidden="true" class="header-anchor">#</a> mobx-react和react-redux</h3> <p>使用Redux和React应用连接时，需要使用react-redux提供的Provider和connect：</p> <p>Provider：负责将Store注入React应用；<br>
connect：负责将store state注入容器组件，并选择特定状态作为容器组件props传递；</p> <p>对于Mobx而言，同样需要两个步骤：</p> <p>Provider：使用mobx-react提供的Provider将所有stores注入应用；<br>
使用inject将特定store注入某组件，store可以传递状态或action；然后使用observer保证组件能响应store中的可观察对象（observable）变更，即store更新，组件视图响应式更新。</p> <h2 id="选择mobx的原因"><a href="#选择mobx的原因" aria-hidden="true" class="header-anchor">#</a> 选择Mobx的原因</h2> <p>学习成本少：Mobx基础知识很简单，学习了半小时官方文档和示例代码就搭建了新项目实例；<br>
而Redux确较繁琐，流程较多，需要配置，创建store，编写reducer，action，如果涉及异步任务，还需要引入redux-thunk或redux-saga编写额外代码，Mobx流程相比就简单很多，并且不需要额外异步处理库；</p> <p>面向对象编程：Mobx支持面向对象编程，我们可以使用@observable and @observer，以面向对象编程方式使得JavaScript对象具有响应式能力；<br>
而Redux最推荐遵循函数式编程，当然Mobx也支持函数式编程；</p> <p>模版代码少：相对于Redux的各种模版代码，如，actionCreater，reducer，saga／thunk等，Mobx则不需要编写这类模板代码；</p> <p>##不选择Mobx的可能原因</p> <p>过于自由：Mobx提供的约定及模版代码很少，这导致开发代码编写很自由，如果不做一些约定，比较容易导致团队代码风格不统一，所以当团队成员较多时，确实需要添加一些约定；</p> <p>可拓展，可维护性：也许你会担心Mobx能不能适应后期项目发展壮大呢？确实Mobx更适合用在中小型项目中，但这并不表示其不能支撑大型项目，关键在于大型项目通常需要特别注意可拓展性，可维护性，相比而言，规范的Redux更有优势，而Mobx更自由，需要我们自己制定一些规则来确保项目后期拓展，维护难易程度；</p> <p>Mobx 的代码要精简得多。通过 OOP 风格和良好的开发实践，你可以快速的构建各种应用。
最大的弊病是很容易编写糟糕的不可维护的代码。
社区发展方面 Mobx 在国内的发展还是比较缓慢的，遇到的问题可能社区都没有遇到过。</p> <p>而 Redux 更受欢迎一些，而且特别适合构建大型复杂应用。这是一个规定严格的框架，其规则确保开发人员可以编写易于测试和可维护的代码。但是，的确不适合开发小项目。</p> <h2 id="redux"><a href="#redux" aria-hidden="true" class="header-anchor">#</a> Redux</h2> <h3 id="redux三大核心"><a href="#redux三大核心" aria-hidden="true" class="header-anchor">#</a> Redux三大核心</h3> <p>Redux，最为核心的概念就是 action 、reducer、store 以及 state</p> <ol><li>action</li> <li>reducer:指明如何更新 state</li> <li>Store：把 action、Reducer 联系到一起的对象，负责维持、获取和更新state</li></ol> <h3 id="数据流"><a href="#数据流" aria-hidden="true" class="header-anchor">#</a> 数据流</h3> <p>严格的单向数据流是 Redux 架构的设计核心。</p> <p>使用过 Redux 的人会有这些痛点：难懂的 API、复杂的逻辑、过多的代码侵入。<br>
Redux 采用单一根节点、函数式编程、动作分离管理（似乎让项目很容易管理），这些都是 Redux 过于复杂的原因</p> <h3 id="异步流-后续重点学习下中间件"><a href="#异步流-后续重点学习下中间件" aria-hidden="true" class="header-anchor">#</a> <code>异步流</code>(后续重点学习下中间件)</h3> <p>由于Redux所有对store状态的变更，都应该通过action触发，异步任务（通常都是业务或获取数据任务）也不例外，而为了不将业务或数据相关的任务混入React组件中，就需要使用其他框架配合管理异步任务流程，如redux-thunk，redux-saga等；
、</p> <h2 id="mobx"><a href="#mobx" aria-hidden="true" class="header-anchor">#</a> Mobx</h2> <p>MobX，它通过透明的函数响应式编程(transparently applying functional reactive programming - TFRP)使得状态管理变得简单和可扩展。</p> <p>比起Redux，Mobx基于观察者模式，采用多节点管理数据，是一个很轻量、入手简单、代码耦合小的数据框架。</p> <h3 id="数据流-2"><a href="#数据流-2" aria-hidden="true" class="header-anchor">#</a> 数据流</h3> <p>MobX 为单向数据流，也就是动作改变状态，而状态的改变会更新所有受影响的视图。</p> <p>它由几个部分组成：Actions、State、Computed Values、Reactions。使用 MobX 将一个应用变成响应式的可归纳为以下步骤:</p> <ul><li>通过事件驱动（UI 事件、网络请求…）触发 Actions</li> <li>在 Actions 中修改了 State 中的值，这里的 State 既应用中的 store 树（存储数据）</li> <li>然后根据新的 State 中的数据计算出所需要的计算属性（computed values）值</li> <li>响应（react）到 UI 视图层</li></ul> <h3 id="observable-state（可被观察的状态）"><a href="#observable-state（可被观察的状态）" aria-hidden="true" class="header-anchor">#</a> Observable state（可被观察的状态）</h3> <p>MobX 为现有的数据结构(如对象，数组和类实例)添加了可观察的功能。 通过使用 @observable 装饰器来给你的类属性添加注解就可以简单地完成这一切。这样改属性就变成了“被观察者”。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Store</span> <span class="token punctuation">{</span>
  @observable a <span class="token operator">=</span> <span class="token string">'Hello Word!'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="observer（观察者）"><a href="#observer（观察者）" aria-hidden="true" class="header-anchor">#</a> Observer（观察者）</h3> <p>observer 函数装饰器可以用来将 React 组件转变成响应式组件。 它用 mobx.autorun 包装了组件的 render 函数以确保任何组件渲染中使用的数据变化时都可以强制刷新组件。 observer 是由单独的 mobx-react 包提供的。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>@observer
<span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>Store<span class="token punctuation">.</span>a<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>这样 Index 组件就变成了一个响应式的组件（智能组件），当“被观察者”改变时，该组件就会自动更新。</p> <h3 id="componentwillreact-生命周期钩子"><a href="#componentwillreact-生命周期钩子" aria-hidden="true" class="header-anchor">#</a> componentWillReact (生命周期钩子)</h3> <p>React 组件通常在新的堆栈上渲染，这使得通常很难弄清楚是什么导致组件的重新渲染。 当使用 mobx-react 时可以定义一个新的生命周期钩子函数 componentWillReact。当组件因为它观察的数据发生了改变，它会安排重新渲染，这个时候 componentWillReact 会被触发。这使得它很容易追溯渲染并找到导致渲染的操作(action)。</p> <h3 id="inject（注入）"><a href="#inject（注入）" aria-hidden="true" class="header-anchor">#</a> inject（注入）</h3> <p>inject 函数装饰器可以将 Store 数据注入到组件当中。inject 是由单独的 mobx-react 包提供的。</p> <p>@inject(&quot;store&quot;)</p> <h3 id="computed-values-计算值"><a href="#computed-values-计算值" aria-hidden="true" class="header-anchor">#</a> Computed values(计算值)</h3> <p>使用 MobX，可以定义在相关数据发生变化时自动更新的值。 通过 @computed 装饰器调用 的getter / setter 函数来进行使用。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">ItemsStore</span> <span class="token punctuation">{</span>
  @observable items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  @computed <span class="token keyword">get</span> <span class="token function">total</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>当添加了一个新的 items 时，MobX 会确保 total 自动更新。</p> <h3 id="action（动作）"><a href="#action（动作）" aria-hidden="true" class="header-anchor">#</a> Action（动作）</h3> <p>action 是任一一段可以改变状态的代码。具体实现代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">HomeStore</span> <span class="token punctuation">{</span>
  @observable num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  @action <span class="token function-variable function">plus</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">=</span> <span class="token operator">++</span><span class="token keyword">this</span><span class="token punctuation">.</span>num
  <span class="token punctuation">}</span>
  @action <span class="token function-variable function">minus</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">=</span> <span class="token operator">--</span><span class="token keyword">this</span><span class="token punctuation">.</span>num
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>如果是在严格模式:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useStrict <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'mobx'</span><span class="token punctuation">;</span>
<span class="token function">useStrict</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>那么 MobX 会强制只有在动作之中才可以修改状态。对于任何不使用动作的状态修改，MobX 都会抛出异常。</p> <h3 id="异步-action"><a href="#异步-action" aria-hidden="true" class="header-anchor">#</a> 异步 Action</h3> <p>action 包装/装饰器只会影响当前运行的函数，而不会影响当前函数调度(但不是调用)的函数！ 这意味着如果你有一个 setTimeout、promise 的 then 或 async 语句，并且在回调函数中某些状态改变了，这些回调函数也应该包装在 action 中。可以使用 action 关键字来包装 promises 回调函数</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>@action
<span class="token function-variable function">fetchData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token function">action</span><span class="token punctuation">(</span><span class="token string">'fetchRes'</span><span class="token punctuation">,</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token function">action</span><span class="token punctuation">(</span><span class="token string">'fetchSuccess'</span><span class="token punctuation">,</span> <span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// TODO</span>

    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>
    <span class="token function">action</span><span class="token punctuation">(</span><span class="token string">'fetchError'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// err</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>异步 action 实现的方式还有多种，这里只列举了 action 关键子的模式</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/accumulate/router.html" class="prev">前端路由 hash + history</a></span> <span class="next"><a href="/accumulate/react.html">react</a>→
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.51a29151.js" defer></script><script src="/assets/js/2.c2339c3e.js" defer></script><script src="/assets/js/37.d73fc92f.js" defer></script>
  </body>
</html>
